<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Saude Remota: Referencia del directorio lib/firebase_data_send</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Saude Remota<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Sistema de monitorizaci√≥n remota de salud basado en el sensor MAX30102. Permite medir ritmo card√≠aco en tiempo real y emplea IA para detectar anomal√≠as y generar alertas autom√°ticas. Ideal para aplicaciones de telemedicina en dispositivos embebidos como el ESP32</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_5fc98195108bfa9815cc81124deba809.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Referencia del directorio firebase_data_send</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Archivos</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="db/d1e/firebase__data__send_2____init_____8py_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="db/d1e/firebase__data__send_2____init_____8py.html">__init__.py</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="d6/dbb/_firebase_raw_sender_8py_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="d6/dbb/_firebase_raw_sender_8py.html">FirebaseRawSender.py</a></td></tr>
<tr class="memdesc:d6/dbb/_firebase_raw_sender_8py"><td class="mdescLeft">&#160;</td><td class="mdescRight">Librer√≠a MicroPython para enviar lecturas a Firebase Realtime Database. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripci√≥n detallada</h2>
<p>Peque√±a librer√≠a de ayuda para enviar lecturas de dispositivos (IoT, wearables, sensores m√©dicos, etc.) a <b>Firebase Realtime Database</b> de forma sencilla y segura.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Caracter√≠sticas</h1>
<ul>
<li>üîë <b>Autenticaci√≥n autom√°tica</b> con Firebase Auth (m√©todo correo/contrase√±a). <br  />
</li>
<li>üì§ <b>Env√≠o inmediato</b> de mediciones mediante <code>send_measurement(temperature, bmp, spo2)</code>. <br  />
</li>
<li>üß© <b><code>send_raw(payload)</code></b> para mandar cualquier diccionario personalizado. <br  />
</li>
<li>‚ôªÔ∏è Reutiliza <code>requests.Session</code> para conexiones HTTP persistentes. <br  />
</li>
<li>‚ö†Ô∏è Manejo de errores HTTP con <code>raise_for_status()</code> y mensajes claros. <br  />
</li>
<li>ü™∂ C√≥digo independiente, sin dependencias externas (solo <code>requests</code>).</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
Instalaci√≥n</h1>
<p>Requiere <b>Python¬†‚â•¬†3.10</b>.</p>
<div class="fragment"><div class="line">pip install requests</div>
</div><!-- fragment --><p>Clona este repositorio o copia <code>firebase_raw_sender.py</code> a tu proyecto.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md6"></a>
Configuraci√≥n de Firebase Realtime Database</h1>
<ol type="1">
<li>Accede a <a href="https://console.firebase.google.com/">Firebase Console</a> y crea un <b>nuevo proyecto</b> (o usa uno existente).</li>
<li>En el men√∫ de la izquierda selecciona <b>Build ‚ñ∏ Realtime Database</b> y pulsa <b>Create Database</b>. <br  />
<ul>
<li>Elige la ubicaci√≥n m√°s cercana a tus usuarios. <br  />
</li>
<li>Selecciona el modo <b>Locked</b> (<em>Start in locked mode</em>) para que se apliquen reglas de seguridad.</li>
</ul>
</li>
<li>Anota la <b>Database URL</b> que aparece en la parte superior (formato <code><a href="https://">https://</a>&lt;TU-PROYECTO&gt;.firebaseio.com</code>); la necesitar√°s como <code>database_url</code>.</li>
<li>Abre la pesta√±a <b>Rules</b> y sustituye el contenido por:</li>
</ol>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;rules&quot;: {</div>
<div class="line">    &quot;.read&quot;: &quot;auth != null&quot;,</div>
<div class="line">    &quot;.write&quot;: &quot;auth.uid === &#39;&lt;YOUR_AUTH_ID&gt;&#39;&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Reemplaza <code>&lt;YOUR_AUTH_ID&gt;</code> por el <code>uid</code> del usuario autorizado a escribir. <br  />
 Puedes obtener tu <code>uid</code> desde <b>Build ‚ñ∏ Authentication ‚ñ∏ Users</b> despu√©s de crear el usuario.</li>
</ul>
<p>En <b>Build ‚ñ∏ Authentication ‚ñ∏ Sign‚Äëin method</b> habilita <b>Email/Password</b> y crea el usuario que utilizar√°s desde tu dispositivo o aplicaci√≥n.</p><ol type="1">
<li>Dir√≠gete a <b>Project settings ‚ñ∏ General</b> y copia el valor <b>Web API key</b> para usarlo como <code>api_key</code> en el c√≥digo.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md8"></a>
Uso r√°pido</h1>
<div class="fragment"><div class="line"><span class="keyword">from</span> firebase_raw_sender <span class="keyword">import</span> FirebaseRawSender</div>
<div class="line">config = {</div>
<div class="line">    <span class="stringliteral">&quot;ssid&quot;</span>: <span class="stringliteral">&quot;YOUR_WIFI_SSID&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;password&quot;</span>: <span class="stringliteral">&quot;YOUR_WIFI_PASSWORD&quot;</span></div>
<div class="line">}</div>
<div class="line">sender = FirebaseRawSender(</div>
<div class="line">    email=<span class="stringliteral">&quot;usuario@ejemplo.com&quot;</span>,</div>
<div class="line">    password=<span class="stringliteral">&quot;TU_PASSWORD&quot;</span>,</div>
<div class="line">    api_key=<span class="stringliteral">&quot;TU_API_KEY_DE_FIREBASE&quot;</span>,</div>
<div class="line">    database_url=<span class="stringliteral">&quot;https://&lt;TU-PROYECTO&gt;.firebaseio.com&quot;</span>,</div>
<div class="line">    wifi_config=config,</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Env√≠a una medici√≥n concreta</span></div>
<div class="line">sender.send_measurement(temperature=36.6, bmp=72, spo2=98, modelPreccision = 90.5, riskScore = 0.3)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># O un payload arbitrario</span></div>
<div class="line">sender.send_raw({<span class="stringliteral">&quot;pressure&quot;</span>: 1011, <span class="stringliteral">&quot;nota&quot;</span>: <span class="stringliteral">&quot;prueba&quot;</span>})</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
### Nota: Si no se proporciona la configuracion wifi se asume que la conexion ya se ha realizado</h1>
<h1><a class="anchor" id="autotoc_md10"></a>
Ejemplos avanzados</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Escenario   </th><th class="markdownTableHeadNone">C√≥digo / Idea principal    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Enviar varias variables adicionales</b>   </td><td class="markdownTableBodyNone"><code>payload = {"temp": 25.4, "hum": 40, "uv": 3.1}; sender.send_raw(payload)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Timestamp personalizado</b>   </td><td class="markdownTableBodyNone"><code>sender.send_measurement(36.5, 80, 97, timestamp_ms=1722600000000)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Reautenticaci√≥n manual</b>   </td><td class="markdownTableBodyNone">Simplemente llama <code>sender._authenticate()</code> si necesitas forzar el refresh del idToken.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Uso en multihilo / asyncio</b>   </td><td class="markdownTableBodyNone">Instancia la clase en el hilo principal y pasa la misma instancia a los hilos / corrutinas hijas.   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md12"></a>
Variables de entorno (opcional)</h1>
<p>Para evitar hardcodear credenciales puedes usar variables de entorno:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Descripci√≥n    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>FIREBASE_EMAIL</code>   </td><td class="markdownTableBodyNone">Correo de la cuenta de servicio / usuario    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>FIREBASE_PASSWORD</code>   </td><td class="markdownTableBodyNone">Contrase√±a de la cuenta    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>FIREBASE_API_KEY</code>   </td><td class="markdownTableBodyNone">API key p√∫blica del proyecto de Firebase    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>FIREBASE_DB_URL</code>   </td><td class="markdownTableBodyNone">URL de la Realtime Database   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md14"></a>
Contribuciones</h1>
<p>¬°Las <em>pull requests</em> son bienvenidas! <br  />
 Abre un <em>issue</em> para reportar bugs o proponer mejoras.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md16"></a>
Licencia</h1>
<p>Distribuido bajo la licencia <b>MIT</b>. <br  />
 Consulta el archivo [LICENSE](LICENSE) para m√°s detalles. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_5fc98195108bfa9815cc81124deba809.html">firebase_data_send</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
